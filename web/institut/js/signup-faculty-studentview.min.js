$(document).ready(function(){shj={};$.signUpGlobal={iVIEW_COURSE_PICKER:1,iVIEW_STUDENT_DETAIL:2,iVIEW_STUDENT_LEISTUNGEN:3,iVIEW_STUDENT_ANMELDUNGEN:4,iVIEW_STUDENT_STUDIENBILANZ:5,iVIEW_STUDENT_PRUEFUNGEN:6,iVIEW_STUDENT_ANTRAG:7,iVIEW_STUDENT_ANTRAG_TRANSKRIPT_1:8,iVIEW_STUDENT_TRANSKRIPTDRUCK:9,iTYP_ANTRAG_TRANSKRIPT_DE:1,iTYP_ANTRAG_TRANSKRIPT_EN:2,iTYP_ANTRAG_TRANSKRIPT_UNMODULAR:3,iTYP_ANTRAG_GYMPO_MISSING_CREDITS:4,sLIFECYCLE_REROUTE_TESTING_PREFIX:""};window.log=function(a,c){(new Image).src=
"log.jsp?sev="+encodeURIComponent(a)+"&msg="+encodeURIComponent(c)};window.onerror=function(a,c,b){log(1,"Fehler in Zeile "+b+" ("+c+"): "+a);return!0};$.ajaxSetup({type:"POST",data:{signup_expected_backend_version:"1-0-0-2"},timeout:2E4,contentType:"application/x-www-form-urlencoded;charset=utf8",dataType:"json",cache:!1,error:function(a,c,b){a=eval("("+a.responseText.substring(a.responseText.indexOf("{"))+")");1!=a.errorcode&&(11==a.errorcode?document.location="./index-studierende.jsp":alert("Sorry, ein unerwarteter Fehler ist aufgetreten. Der Server meldet: \n\n"+
a.error))}});window.explainMe=function(a){alert("Es ist ein: "+a);for(var c in a)alert(c+": "+a[c])};shj.signUp=function(){var a=function(a,b,c,k){0!==arguments.length&&(this._name=a,this.namespace=c.namespace,this.seminar_id_orig=this.seminar_id=b,this.lifecycle_base_url=k,"undefined"!==typeof c&&$.extend(this,c))};a.prototype.add=function(a,c){b(this,"add",a,c);return!0};a.prototype.update=function(a,c){b(this,"update",a,c);return!0};a.prototype.drop=function(a,c){b(this,"delete",a,c);return!0};
var c=function(a,c,f,k){if(0!==arguments.length){this.seminar_id=a;this._name=c;this.lifecycle_base_url=f.lifecycle_base_url;this.namespace=f.namespace;this.item_identifier=f.identifier;this.item_constructor=f.constructor_name;this.item_name=f._name;var h=this,g=[];"_offline"===this.lifecycle_base_url?"function"===typeof k&&k(h):b(h,"get",function(a){for(var b=0;b<a[h._name].length;b++)g[b]=new shj.signUp[h.namespace][h.item_constructor](h.seminar_id,a[h._name][b][h.item_name]),g[b].namespace=h.namespace;
h[h._name]=g;"function"===typeof k&&k(h);return h},function(){});return h}};c.prototype.drop=function(a,b,c){var k=this;a.drop(function(){for(var c=0;c<k[k._name].length;c++)if(k[k._name][c].equals(a)){k[k._name].splice(c,1);break}"function"===typeof b&&b()},c);return this};c.prototype.add=function(a,b,c,k){var h=this;(new shj.signUp[h.namespace][h.item_constructor](a,b)).add(function(g){$.extend(b,g[h.item_name]);h[h._name].push(new shj.signUp[h.namespace][h.item_constructor](a,b));"function"===
typeof c&&c(g)},k);return h};c.prototype.get=function(a){if(!this.item_identifier)return null;for(var b={},c=0;c<this[this._name].length;c++)if(this[this._name][c][this.item_identifier]==a){b=this[this._name][c];break}return b};c.prototype.getByName=function(a){for(var b={},c=0;c<this[this._name].length;c++)if(this[this._name][c].name==a){b=this[this._name][c];break}return b};getRequestValue=function(a){if(a=RegExp("[?&]"+encodeURIComponent(a)+"=([^&]*)").exec(location.search))return decodeURIComponent(a[1])};
getConstructorName=function(a){return(a=/function (.{1,})\(/.exec(a.constructor.toString()))&&1<a.length?a[1]:""};var b=function(a,b,c,k){var h={},g;for(g in a)"add"!==g&&("update"!==g&&"drop"!==g&&"get"!==g&&"namespace"!==g&&"function"!==typeof a[g]&&"object"!==typeof a[g])&&(h[g]=a[g]);h.signup_expected_backend_version="1-0-0-2";if("undefined"==a.lifecycle_base_url)throw Exception("Fehler im Lifecycle: kein URL definiert.");g=window.location.protocol+"//"+window.location.host+window.location.pathname;
g=0<=g.indexOf("Faculty")?g.substring(0,g.indexOf("Faculty/")+7):g.substring(0,g.indexOf("test"))+getRequestValue("shj_seminar")+"/Faculty";$.ajax({data:h,url:g+"/json/"+a.namespace+"/"+a.lifecycle_base_url+"/"+b+".jsp",type:"POST",success:function(a){"function"===typeof c&&c(a)},timeout:2E4,contentType:"application/x-www-form-urlencoded;charset=utf8",dataType:"json",cache:!1,error:function(a,b,c){"function"===typeof k&&!0===k($.parseJSON(a.responseText))||(a=eval("("+a.responseText.substring(a.responseText.indexOf("{"))+
")"),1==a.errorcode?alert("Sorry -- ein fehler ist aufgetreten. Falls das Programm nicht weiter normal funktioniert, melden Sie sich bitte neu an."):alert("Sorry -- ein fehler ist aufgetreten. Der Server meldet: \n"+a.error+"\n\nFalls das Programm nicht weiter normal funktioniert, melden Sie sich bitte neu an."))}});return!0};return{ShjCoreObject:a,ShjCoreCollection:c,lifecycle_act:b}}();shj.signUp.search=function(){return{findKurse:function(a,c,b){$.ajax({data:a,url:"json/kurs/get.jsp",success:function(a){var d=
[],f;for(f in a.kurse)d.push(a.kurse[f].kurs);0>=d.length?"function"===typeof b&&b():shj.signUp.toolbox.render(d,c)}});return this},findStudierende:function(a,c,b){$.ajax({data:a,url:"json/student/get.jsp",success:function(a){var d=[],f;for(f in a)d.push(a[f].student);$.isEmptyObject(c)||shj.signUp.toolbox.render(d,c);"function"===typeof b&&b(a)}});return this}}}();shj.signUp.toolbox=function(){return{isValidEmail:function(a){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a)},
isUnmodularInHeidelberg:function(a){a=parseInt(a);switch(a){case 8351:case 8361:case 8371:case 8352:case 8362:case 671:case 671:return!0;default:return!1}},getGermanDate:function(a){a=a.split("-");return a[2]+"."+a[1]+"."+a[0]},getDateFromGerman:function(a){a=a.split(".");return new Date(parseInt(a[2]),parseInt(a[1])-1,a[0])},getLastDayOfSemester:function(a){var c=new Date,b="#Err";"current"===a?(a=parseInt(c.getMonth())+1,b=2<a&&9>a?"31.8."+c.getFullYear():1==a?"28.2."+c.getFullYear():"28.2."+c.getFullYear()+
1):b=0==a.indexOf("ss")?"31.8."+a.substr(2,4):"28.2."+a.substr(7,4);return b},render:function(a,c){try{"undefined"!=typeof a.shj_rendering&&(c=a.shj_rendering)}catch(b){}if("TR"===$(c.HTML_template)[0].tagName)return this.shj_tabelizer(a,c);if("DL"===$(c.HTML_template)[0].tagName)return this.shj_tabelizer(a,c,!0);if("FORM"===$(c.HTML_template)[0].tagName)return this.mergeToForm(a,c);if("DIV"===$(c.HTML_template)[0].tagName)return this.mergeToDiv(a,c)},populateCbo:function(a,c){for(var b=0;b<a.length;b++)$("<option/>").val(a[b][c.identifyer]).text(a[b][c.text]).appendTo(c.cboIdentifyer)},
confirm:function(a,c,b,e,d){$(a).find(".shj_SignUp_Confirm_Header").text(c);$(a).find(".shj_SignUp_Confirm_Body").html(b);$(a).find(".cmdShj_SignUp_ConfirmAct_Cancel").off();$(a).find(".cmdShj_SignUp_ConfirmAct_Cancel").on("click",function(){d();$(a).modal("hide")});$(a).find(".cmdShj_SignUp_Confirm_Act").off();$(a).find(".cmdShj_SignUp_Confirm_Act").on("click",function(){e();$(a).modal("hide")});$(".modal").modal("hide");$(a).modal("show")},confirmDelete:function(a,c,b,e,d){$(a).find(".shj_SignUp_ConfirmDelete_Header").text(c);
$(a).find(".shj_SignUp_ConfirmDelete_Body").html(b);$("#cmdShj_SignUp_ConfirmDelete").off("click");$("#cmdShj_SignUp_ConfirmDelete_Cancel").off("click");$(".modal").modal("hide");$(a).modal("show");$("#cmdShj_SignUp_ConfirmDelete").on("click",function(){e();$(a).modal("hide")});$("#cmdShj_SignUp_ConfirmDelete_Cancel").on("click",function(){"function"===typeof d&&d();$(a).modal("hide")})},mergeToRow:function(a,c,b){$(a).data("shj_item",c);$.each(c,function(c,d){"function"!==typeof d&&$(a).find("."+
b+c).text(d)});return a},shj_tabelizer:function(a,c,b){!0===c.emptyFirst&&(!0!=b?$(c.HTML_table_container+" tbody").find("tr").remove():$(c.HTML_table_container+" dl").remove());var e=[],d=this;$.each(a,function(a,b){var h=$(c.HTML_template).clone();d.mergeToRow(h,b,c.HTML_template_class_prefix);e.push(h)});!1!==c.actOnDom&&(!0!=b?$(c.HTML_table_container+" tbody").append(e):($(c.HTML_table_container).append("<dl/>"),$(c.HTML_table_container+" dl").append(e)));return e},mergeToForm:function(a,c){var b=
c.HTML_template_class_prefix;$(c.HTML_template).removeData();!0==c.emptyFirst&&($(c.HTML_template+" input").val("").removeData(),$(c.HTML_template+" select").attr("selected",""));$(c.HTML_template).data("shj_item",a);$.each($(c.HTML_template+" input"),function(c,d){var f=a[$(d).attr("id").substring(b.length)];"undefined"!==typeof f&&$(d).val(f)});$.each($(c.HTML_template+" textarea"),function(c,d){var f=a[$(d).attr("id").substring(b.length)];"undefined"!==typeof f&&$(d).val(f)});$.each($(c.HTML_template+
" select"),function(c,d){var f=a[$(d).attr("id").substring(b.length)];"undefined"!==typeof f&&$(d).val(f);$("#"+$(d).attr("id")+" [value='"+f+"']").attr("selected","selected")});c.stripPrefixOffId&&$(c.HTML_template).find("*").each(function(a){if($(this).is("input")||$(this).is("select"))try{$(this).attr("id",$(this).attr("id").substring(b.length))}catch(c){}});return $(c.HTML_template)},mergeToDiv:function(a,c){var b=c.HTML_template_class_prefix;$(c.HTML_template).removeData();$(c.HTML_table_container).contents().filter(function(){return 3==
this.nodeType}).remove();$(c.HTML_template).data("shj_item",a);$.each(a,function(a,d){"function"!==typeof d&&(alert("Merging "+b+a+" with "+d),$(c.HTML_template).find("."+b+a).text(d))});return $(c.HTML_template)},renderDiv:function(a,c,b){$(a).data(c);$.each(c,function(c,d){$(a).find("."+b+c).html(d)});return a}}}();shj.signUp.kurstermine=function(){var a=function(b){var c={},f="So Mo Di Mi Do Fr Sa".split(" ");c.periode="block";c.abbrev="unklar";c.hint="--";11<b.length&&(c.periode="woche");18<b.length&&
(c.periode="halbwoche");38<b.length&&(c.periode="block");if("woche"==c.periode){for(var k=getNormalTime(b[0].start),h=getNormalTime(b[0].stop),g=getDateFromISO(b[0].datum).getDay(),l=0;l<b.length;l++){if(getNormalTime(b[l].start)!==k||getNormalTime(b[l].stop)!==h)c.periode="block",c.hint="Nicht w\u00f6chentlich, weil die "+l+".te Sitzung von "+b[l].start+"-"+b[l].stop+" l\u00e4uft, und nicht wie die erste von "+k+"-"+h;getDateFromISO(b[l].datum).getDay()!=g&&(console.log("INFO: Tag abweichend: "+
b[l].datum+" (Serienstart: "+b[0].datum+")"),c.periode="block",c.hint="Nicht w\u00f6chentlich, weil keine Woche zwischen dem "+(l-1)+".ten und dem "+l+".ten Termin liegt ("+b[l].datum+" f\u00e4llt aus der Rolle).")}"woche"==c.periode&&(c.abbrev=f[g]+" "+k.substring(0,5)+"-"+h.substring(0,5))}if("halbwoche"==c.periode){k=[];f=[];g=getDateFromISO(b[0].datum);tmpDtm=new Date(g.getTime()+6048E5);h=tmpDtm.getFullYear()+"-"+withLeadingZero(tmpDtm.getMonth()+1)+"-"+withLeadingZero(tmpDtm.getDate())==b[1].datum?
getDateFromISO(b[2].datum).getDay():getDateFromISO(b[1].datum).getDay();g=getDateFromISO(b[0].datum).getDay();g===h&&(c.periode="block",c.hint="Sah zun\u00e4chst aus wie halbw\u00f6chentlich, es gibt aber nur einen Tag anstatt zwei pro Woche");for(var l=0,q=b.length;l<q;l++)if(getDateFromISO(b[l].datum).getDay()===g)k.push(b[l]);else if(getDateFromISO(b[l].datum).getDay()===h)f.push(b[l]);else{c.periode="block";c.hint="Sah zun\u00e4chst aus wie halbw\u00f6chentlich, aber Termin Nr. "+l+" am "+b[l].datum+
" l\u00e4sst sich nicht einordnen.";break}"halbwoche"==c.periode&&(b=a(k),g={},"woche"!=b.periode?(c.periode="block",c.hint="Sah zun\u00e4chst aus wie halbw\u00f6chentlich, aber der erste Termin findet nicht w\u00f6chentlich statt, denn: >>"+b.hint+"<<."):(g=a(f),"woche"!=g.periode?(c.periode="block",c.hint="Sah zun\u00e4chst aus wie halbw\u00f6chentlich, aber der zweite Termin findet nicht w\u00f6chentlich statt, denn: >>"+g.hint+"<<."):c.abbrev=b.abbrev+", "+g.abbrev))}return c},c=function(a,d,
f){var k=[],h=b(a.day)+1;d.feiertage=d.feiertage||"1969-1-1";var g=getDateFromISO(d.semesterStart),l=getDateFromISO(d.semesterStop),q=0,q=h-g.getUTCDay();0>q&&(q+=7);h=new Date(g.getTime()+parseInt(864E5*q));g={};g.datum=h.getFullYear()+"-"+(h.getMonth()+1)+"-"+h.getDate();g.start=getNormalTime(a.start);g.stop=getNormalTime(a.stop);k.push(g);g=h;for(q=0;20>q;q++){var n={},h=new Date(g.getTime()+6048E5);if(h.getTime()>l.getTime())break;g=h;n.datum=h.getFullYear()+"-"+(h.getMonth()+1)+"-"+h.getDate();
n.start=getNormalTime(a.start);n.stop=getNormalTime(a.stop);0>d.feiertage.indexOf(n.datum)&&k.push(n)}2<arguments.length&&(l=c(f,d),k=k.concat(l),k.sort(function(a,b){return getDateFromISO(a.datum).getTime()-getDateFromISO(b.datum).getTime()}));return k},b=function(a){var b=-1;a=a.toLowerCase();0<=["mo","mon","montag","monday"].indexOf(a)&&(b=0);0<=["di","tue","dienstag","tuesday"].indexOf(a)&&(b=1);0<=["mi","wed","mittwoch","wednesday"].indexOf(a)&&(b=2);0<=["do","thu","donnerstag","thursday"].indexOf(a)&&
(b=3);0<=["fr","fri","freitag","friday"].indexOf(a)&&(b=4);0<=["sa","sam","samstag","saturday"].indexOf(a)&&(b=5);0<=["so","sun","sonntag","sunday"].indexOf(a)&&(b=6);return b};withLeadingZero=function(a){return 10>parseInt(a)?"0"+parseInt(a):a};getDateFromISO=function(a){a=a.split("-");return new Date(Date.UTC(a[0],parseInt(a[1])-1,parseInt(a[2])))};getNormalTime=function(a){return 5<a.length?a.substring(0,5):a};return{guessPattern:a,getTermineKomplett:c,getDayCode:b}}();shj.signUp.seminar=function(){var a=
function(a,b){0!==arguments.length&&(this.seminar_id_orig=a,this.lifecycle_base_url="information","undefined"!==typeof b&&$.extend(this,b),this.equals=function(a){return this.id===a.id},shj.signUp.ShjCoreObject.call(this,"Information",a,{namespace:"seminar"},"information"))};a.prototype=new shj.signUp.ShjCoreObject;a.prototype.kommentiere=function(a,b,c){this.sonderfkt="Kommentar";this.kommentar=a;this.add(b,c)};var c=function(a,b,c){this.seminar_id=a;this.lifecycle_base_url="informationen";"undefined"!==
typeof c&&(this.info_after=c);shj.signUp.ShjCoreCollection.call(this,a,"informationen",{lifecycle_base_url:"information",_name:"information",item_identifier:"id",identifier:"id",constructor_name:"Information",namespace:"seminar"},b)};c.prototype=new shj.signUp.ShjCoreCollection;var b=function(a,b){0!==arguments.length&&(this.seminar_id_orig=a,this.lifecycle_base_url="note","undefined"!==typeof b&&$.extend(this,b),this.equals=function(a){return this.id===a.id},shj.signUp.ShjCoreObject.call(this,"Note",
a,{namespace:"seminar"},"note"))};b.prototype=new shj.signUp.ShjCoreObject;var e=function(a,b){this.seminar_id=a;this.lifecycle_base_url="note";shj.signUp.ShjCoreCollection.call(this,a,"noten",{lifecycle_base_url:"note",_name:"note",item_identifier:"id",identifier:"id",constructor_name:"Note",namespace:"seminar"},b)};e.prototype=new shj.signUp.ShjCoreCollection;var d=function(a,b){0!==arguments.length&&(this.seminar_id_orig=a,this.lifecycle_base_url="dozent","undefined"!==typeof b&&$.extend(this,
b),this.equals=function(a){return this.id===a.id},shj.signUp.ShjCoreObject.call(this,"Dozent",a,{namespace:"seminar"},"dozent"))};d.prototype=new shj.signUp.ShjCoreObject;var f=function(a,b){this.seminar_id=a;this.lifecycle_base_url="dozent";shj.signUp.ShjCoreCollection.call(this,a,"dozenten",{lifecycle_base_url:"dozent",_name:"dozent",identifier:"id",constructor_name:"Dozent",namespace:"seminar"},b)};f.prototype=new shj.signUp.ShjCoreCollection;var k=function(a,b){0!==arguments.length&&(this.seminar_id_orig=
a,this.lifecycle_base_url="fach",this.hasModule=!1,"undefined"!=typeof b.module&&(this.hasModule=!0,this.module=new l(a,b.module)),"undefined"!==typeof b&&$.extend(this,b),this.equals=function(a){return this.id===a.id},shj.signUp.ShjCoreObject.call(this,"Fach",a,{namespace:"seminar"},"fach"))};k.prototype=new shj.signUp.ShjCoreObject;var h=function(a,b){this.seminar_id=a;this.lifecycle_base_url="fach";shj.signUp.ShjCoreCollection.call(this,a,"faecher",{lifecycle_base_url:"fach",_name:"fach",identifier:"id",
constructor_name:"Fach",namespace:"seminar"},b)};h.prototype=new shj.signUp.ShjCoreCollection;h.prototype.getLeistungen=function(){if("undefined"!==typeof this.leistungenArr)return this.leistungenArr;for(var a=[],b=";",c=[],d=0;d<this.faecher.length;d++)for(var e=0;e<this.faecher[d].module.length;e++)for(var f=0;f<this.faecher[d].module[e].modul.leistungen.length;f++)0>b.indexOf(";"+this.faecher[d].module[e].modul.leistungen[f].leistung.id+";")&&(b+=this.faecher[d].module[e].modul.leistungen[f].leistung.id+
";",c.push(this.faecher[d].module[e].modul.leistungen[f].leistung.name),a.push(this.faecher[d].module[e].modul.leistungen[f].leistung));a.sort(function(a,b){var c=a.name.toLowerCase(),t=b.name.toLowerCase();return c<t?-1:c>t?1:0});return this.leistungenArr=a};var g=function(a,b){if(0!==arguments.length){this.seminar_id_orig=a;this.lifecycle_base_url="seminar/fach/modul";for(var c=[],d=0;d<b.leistungen.length;d++)c[d]=new q(this.seminar_id,b.leistungen[d].leistung);this.leistungen=c;"undefined"!==
typeof b&&$.extend(this,b);this.equals=function(a){return this.id===a.id};shj.signUp.ShjCoreObject.call(this,"Modul",a,{namespace:"seminar"},"modul")}};g.prototype=new shj.signUp.ShjCoreObject;var l=function(a,b,c){this.seminar_id=a;this.lifecycle_base_url="_offline";shj.signUp.ShjCoreCollection.call(this,a,"module",{lifecycle_base_url:"_offline",_name:"modul",identifier:"id",constructor_name:"Modul",namespace:"seminar"},c);if("function"===typeof c)return c(this),this};l.prototype=new shj.signUp.ShjCoreCollection;
var q=function(a,b){0!==arguments.length&&(this.seminar_id_orig=a,this.modul_id=this.modul,this.lifecycle_base_url="leistung","undefined"!==typeof b&&$.extend(this,b),this.equals=function(a){return this.id===a.id},shj.signUp.ShjCoreObject.call(this,"Leistung",a,{namespace:"seminar"},"leistung"))};q.prototype=new shj.signUp.ShjCoreObject;var n=function(a,b){this.seminar_id=a;this.lifecycle_base_url="leistung";shj.signUp.ShjCoreCollection.call(this,this.seminar_id,"leistungen",{lifecycle_base_url:"leistung",
_name:"leistung",identifier:"id",constructor_name:"Leistung",namespace:"seminar"},b)};n.prototype=new shj.signUp.ShjCoreCollection;var m=function(a,b){0!==arguments.length&&(this.seminar_id_orig=a,this.lifecycle_base_url="kurstyp","undefined"!==typeof b&&$.extend(this,b),this.equals=function(a){return this.id===a.id},shj.signUp.ShjCoreObject.call(this,"Kurstyp",this.seminar_id,{namespace:"seminar"},"kurstyp"))};m.prototype=new shj.signUp.ShjCoreObject;var p=function(a,b){this.seminar_id=a;this.lifecycle_base_url=
"kurstyp";shj.signUp.ShjCoreCollection.call(this,this.seminar_id,"kurstypen",{lifecycle_base_url:"kurstyp",_name:"kurstyp",identifier:"id",constructor_name:"Kurstyp",namespace:"seminar"},b)};p.prototype=new shj.signUp.ShjCoreCollection;var s=function(a,b){0!==arguments.length&&(this.seminar_id_orig=a,this.lifecycle_base_url="kurs","undefined"!==typeof b&&$.extend(this,b),this.equals=function(a){return this.id===a.id},shj.signUp.ShjCoreObject.call(this,"Kurs",-1,{namespace:"seminar"},"kurs"))};s.prototype=
new shj.signUp.ShjCoreObject;var r=function(a,b){this.seminar_id=a;this.lifecycle_base_url="kurs";shj.signUp.ShjCoreCollection.call(this,-1,"kurse",{lifecycle_base_url:"kurs",_name:"kurs",identifier:"id",constructor_name:"Kurs",namespace:"seminar"},b)};r.prototype=new shj.signUp.ShjCoreCollection;return{Modul:g,Module:l,Dozent:d,Dozenten:f,Fach:k,Faecher:h,Information:a,Informationen:c,Leistung:q,Leistungen:n,Note:b,Noten:e,Kurstyp:m,Kurstypen:p,Kurs:s,Kurse:r}}();shj.signUp.student=function(){var a=
function(a,b){0!==arguments.length&&(this.matrikelnummer=b.matrikelnummer,this.lifecycle_base_url="anmeldung","undefined"!==typeof b&&($.extend(this,b),this.id_orig=b.id,this.count_orig=b.count,this.is_anmeldung=!0,this.aussteller=b.aussteller_vorname.trim(),"undefined"!=typeof b.aussteller_nachname&&(this.aussteller+=" "+b.aussteller_nachname.trim())),this.equals=function(a){return this.id===a.id&&this.count==a.count},shj.signUp.ShjCoreObject.call(this,"Anmeldung",-1,{namespace:"student",matrikelnummer:this.matrikelnummer},
"anmeldung"))};a.prototype=new shj.signUp.ShjCoreObject;var c=function(a,b){this.matrikelnummer=a;this.lifecycle_base_url="anmeldung";shj.signUp.ShjCoreCollection.call(this,-1,"anmeldungen",{lifecycle_base_url:"anmeldung",_name:"anmeldung",constructor_name:"Anmeldung",namespace:"student"},b)};c.prototype=new shj.signUp.ShjCoreCollection;var b=function(a,b){0!==arguments.length&&(this.lifecycle_base_url="leistung","undefined"!==typeof b&&($.extend(this,b),"undefined"===typeof this.modul_id&&(this.modul_id=
this.modul),this.id_orig=b.id,this.count_orig=b.count,this.is_anmeldung=!1,this.aussteller=b.aussteller_vorname+" "+b.aussteller_nachname),this.equals=function(a){return this.id===a.id&&this.count==a.count},shj.signUp.ShjCoreObject.call(this,"Leistung",-1,{namespace:"student",matrikelnummer:this.matrikelnummer},"leistung"))};b.prototype=new shj.signUp.ShjCoreObject;var e=function(a,b){this.matrikelnummer=a;this.lifecycle_base_url="leistung";shj.signUp.ShjCoreCollection.call(this,-1,"leistungen",{lifecycle_base_url:"leistung",
_name:"leistung",constructor_name:"Leistung",namespace:"student"},b)};e.prototype=new shj.signUp.ShjCoreCollection;var d=function(a,b){0!==arguments.length&&(this.matrikelnummer=b.matrikelnummer,this.equals=function(a){return this.id===a.id},this.lifecycle_base_url="pruefung","undefined"!==typeof b&&($.extend(this,b),this.id_orig=b.id,this.count_orig=b.count),shj.signUp.ShjCoreObject.call(this,"Pruefung",-1,{namespace:"student",matrikelnummer:this.matrikelnummer},"pruefung"))};d.prototype=new shj.signUp.ShjCoreObject;
var f=function(a,b){this.matrikelnummer=a;this.lifecycle_base_url="pruefung";shj.signUp.ShjCoreCollection.call(this,-1,"pruefungen",{lifecycle_base_url:"pruefung",_name:"pruefung",item_identifier:"id",constructor_name:"Pruefung",namespace:"student"},b)};f.prototype=new shj.signUp.ShjCoreCollection;var k=function(a,b){this.matrikelnummer=a;this.lifecycle_base_url="pruefung";this.konfigurierte_only=!0;f.call(this,a,b)};k.prototype.add=function(){alert("Sorry, nicht implementiert")};k.prototype.update=
function(){alert("Sorry, nicht implementiert")};k.prototype.drop=function(){alert("Sorry, nicht implementiert")};var h=function(a,b){0!==arguments.length&&($.extend(this,b),this.equals=function(a){return this.id===a.id},shj.signUp.ShjCoreObject.call(this,"Fachnote",a,{namespace:"student",matrikelnummer:b.matrikelnummer},"Fachnote"))};h.prototype=new shj.signUp.ShjCoreObject;var g=function(a,b){this.matrikelnummer=a;shj.signUp.ShjCoreCollection.call(this,-1,"fachnoten",{lifecycle_base_url:"fachnote",
_name:"fachnote",constructor_name:"Fachnote",namespace:"student"},b)};g.prototype=new shj.signUp.ShjCoreCollection;var l=function(a,b){0!==arguments.length&&(this.equals=function(a){return this.id===a.id},this.bemerkung_id||(this.bemerkung_id=b.id||b.bemerkung_id),shj.signUp.ShjCoreObject.call(this,"Bemerkung",-1,{namespace:"student",matrikelnummer:b.matrikelnummer,id:b.id,bemerkung:b.bemerkung,datum:b.datum,autor:b.autor},"bemerkung"))};l.prototype=new shj.signUp.ShjCoreObject;var q=function(a,b){this.matrikelnummer=
a;shj.signUp.ShjCoreCollection.call(this,-1,"bemerkungen",{lifecycle_base_url:"bemerkung",_name:"bemerkung",constructor_name:"Bemerkung",namespace:"student"},b)};q.prototype=new shj.signUp.ShjCoreCollection;var n=function(a,b){0!==arguments.length&&(this.equals=function(a){return this.verifikationscode===a.verifikationscode&&this.matrikelnummer===a.matrikelnummer},this.matrikelnummer=b.matrikelnummer,this.english=b.english?b.english:"false",$.extend(this,b),shj.signUp.ShjCoreObject.call(this,"Dokument",
-1,{namespace:"student",matrikelnummer:this.matrikelnummer},"transkript"))};n.prototype=new shj.signUp.ShjCoreObject;var m=function(a,b,c){this.matrikelnummer=a;shj.signUp.ShjCoreCollection.call(this,-1,"transkripte",{lifecycle_base_url:"transkript",_name:"transkript",constructor_name:"Dokument",namespace:"student"},b)};m.prototype=new shj.signUp.ShjCoreCollection;var p=function(a,b){0!==arguments.length&&(this.matrikelnummer=b.matrikelnummer,this.lifecycle_base_url="antrag",this.equals=function(a){return this.id===
a.id},$.extend(this,b),!this.antrag_id&&this.id&&(this.antrag_id=this.id),shj.signUp.ShjCoreObject.call(this,"Antrag",-1,{namespace:"student",matrikelnummer:this.matrikelnummer},"antrag"))};p.prototype=new shj.signUp.ShjCoreObject;var s=function(a,b){this.matrikelnummer=a;shj.signUp.ShjCoreCollection.call(this,-1,"antraege",{lifecycle_base_url:"antrag",_name:"antrag",constructor_name:"Antrag",namespace:"student"},b)};s.prototype=new shj.signUp.ShjCoreCollection;return{Bemerkung:l,Bemerkungen:q,Leistung:b,
Leistungen:e,Anmeldung:a,Anmeldungen:c,Pruefung:d,Pruefungen:f,KonfiguriertePruefungen:k,update:function(a,b,c,d){b.lifecycle_base_url="";b.namespace="student";b.matrikelnummer=a;shj.signUp.lifecycle_act(b,"update",c,d)},Antrag:p,Antraege:s,Dokument:n,Dokumente:m,Fachnoten:g,Fachnote:h}}()});$(document).ready(function(){window._renderLeistungenTabelle=function(a){if($(".tableSorter").length){if("undefined"===typeof $.signUpGlobal.tableSorterHeadLeistung||""===$.signUpGlobal.tableSorterHeadLeistung)$.signUpGlobal.tableSorterHeadLeistung=$("#divLeistungen").html();$("#divLeistungen").find("*").remove();$("#divLeistungen").html($.signUpGlobal.tableSorterHeadLeistung)}a.leistungen.shj_rendering={item:a.leistungen,emptyFirst:!0,HTML_template:"#template_leistung",HTML_table_container:"#divLeistungen",
HTML_template_class_prefix:"leistung_"};shj.signUp.toolbox.render(a.leistungen);$("#divLeistungen").find(".leistung_note").each(function(){"t"==$(this).parents("tr").data("shj_item").anerkannt&&$(this).append(' <span title="* = anerkannt" style="color:red; font-size:1.5em">*</span>')});$("#divLeistungen").find(".leistung_name").popover({delay:{show:800,hide:100},placement:"bottom",trigger:"hover",title:function(){return"<strong>"+$(this).parents("tr").data("shj_item").name},content:function(){return"<strong>"+
$(this).parents("tr").data("shj_item").kurstitel+"</strong><br />Aussteller: "+$(this).parents("tr").data("shj_item").aussteller_vorname+" "+$(this).parents("tr").data("shj_item").aussteller_nachname+"<br />Modul: "+getModulBezeichnung($(this).parents("tr").data("shj_item").modul)}});if($(".tableSorter :visible").length){var c=0;$("table.tableSorter tr").each(function(){$(this).find(".shjDataCol").attr("data-sortAs",c++)});$("table.tableSorter").tableSort()}};window.showLeistungen=function(a){if(null!=
student.leistungen&&"undefined"!=typeof student.leistungen&&student.matrikelnummer==student.leistungen.matrikelnummer)return 0===document.getElementById("tLeistungen").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length&&(setView($.signUpGlobal.iVIEW_STUDENT_LEISTUNGEN),_renderLeistungenTabelle(student.leistungen,_renderLeistungenTabelle(student.leistungen))),setView($.signUpGlobal.iVIEW_STUDENT_LEISTUNGEN),!0;student.leistungen=new shj.signUp.student.Leistungen(student.matrikelnummer,
function(c){_renderLeistungenTabelle(c);"function"==typeof a&&a()});setView($.signUpGlobal.iVIEW_STUDENT_LEISTUNGEN)};window.getModulBezeichnung=function(a){for(var c="unbekannt",b=0;b<student.fach.module.length;b++)if(student.fach.module[b].modul.id==a){c=student.fach.module[b].modul.name;break}return c};window._renderAnmeldungenTabelle=function(a){shj.signUp.toolbox.render(a.anmeldungen,{item:a.anmeldungen,emptyFirst:!0,HTML_template:"#template_anmeldung",HTML_table_container:"#divAnmeldungen",
HTML_template_class_prefix:"anmeldung_"});var c=new Date;$("#divAnmeldungen").find(".anmeldungDelete a").each(function(){shj.signUp.toolbox.getDateFromGerman($(this).parents("tr").data("shj_item").fristende)<c&&$(this).addClass("disabled").attr("onclick","").attr("title","An- und Abmeldefrist abgelaufen")});$("#divAnmeldungen").find(".anmeldung_name").popover({delay:{show:800,hide:100},placement:"bottom",trigger:"hover",title:function(){return"<strong>"+$(this).parents("tr").data("shj_item").name},
content:function(){return"<strong>"+$(this).parents("tr").data("shj_item").kurstitel+"</strong><br />Aussteller: "+$(this).parents("tr").data("shj_item").aussteller_vorname+" "+$(this).parents("tr").data("shj_item").aussteller_nachname+"<br />Modul: "+getModulBezeichnung($(this).parents("tr").data("shj_item").modul)}})};window._renderPruefungenTabelle=function(a){a.pruefungen.shj_rendering={item:a.pruefungen,emptyFirst:!0,HTML_template:"#template_pruefung",HTML_table_container:"#divPruefungen",HTML_template_class_prefix:"pruefung_"};
shj.signUp.toolbox.render(a.pruefungen)};window.showPruefungen=function(a){if(null!=student.pruefungen&&"undefined"!=typeof student.pruefungen&&student.matrikelnummer==student.pruefungen.matrikelnummer)return setView($.signUpGlobal.iVIEW_STUDENT_PRUEFUNGEN),!0;student.pruefungen=new shj.signUp.student.Pruefungen(student.matrikelnummer,function(c){_renderPruefungenTabelle(c);"function"==typeof a&&a()});setView($.signUpGlobal.iVIEW_STUDENT_PRUEFUNGEN)};window.showAnmeldungen=function(a){if(null!=student.anmeldungen&&
"undefined"!=typeof student.anmeldungen&&student.matrikelnummer==student.anmeldungen.matrikelnummer)return setView($.signUpGlobal.iVIEW_STUDENT_ANMELDUNGEN),!0;student.anmeldungen=new shj.signUp.student.Anmeldungen(student.matrikelnummer,function(c){_renderAnmeldungenTabelle(c);"function"==typeof a&&a()});setView($.signUpGlobal.iVIEW_STUDENT_ANMELDUNGEN)};window.deleteAnmeldung=function(a){if(!a instanceof shj.signUp.student.Anmeldung)throw"Fehler im Programm. Es wurde keine Anmeldung zum L\u00f6schen \u00fcbergeben.";
shj.signUp.toolbox.confirmDelete("#modShj_SignUp_ConfirmDelete","Anmeldung l\u00f6schen?","Soll diese Anmeldung<br /><br /><b>"+a.name+"</b> ("+a.aussteller_nachname+")<br /><br />wirklich unwiderruflich gel\u00f6scht werden?",function(){student.anmeldungen.drop(a,function(){_renderAnmeldungenTabelle(student.anmeldungen)},function(){alert("Fehler -- sorry. Die Anmeldung konnte nicht gel\u00f6scht werden!")})})};window.modulContainsLeistung=function(a,c){for(var b=!1,e=0;e<student.fach.module.length;e++)for(var d=
0;d<student.fach.module[e].modul.leistungen.length;d++)if(student.fach.module[e].modul.id===a&&c===student.fach.module[e].modul.leistungen[d].leistung.id){b=!0;break}return b};window.addAnmeldung=function(a,c){if(null==student.anmeldungen||"undefined"==typeof student.anmeldungen)return showAnmeldungen(function(){addAnmeldung(a,c)}),!0;var b={};b.kurs_id=a.id;b.kurstyp_id=a.kurstyp_id;b.matrikelnummer=student.matrikelnummer;$.extend(b,a);b.kurstitel=a.titel;b.kurstitel_en=a.titel_en;b.id=a.leistung_id;
b.aussteller_vorname=a.lehrende.substr(0,a.lehrende.indexOf(" "));b.aussteller_nachname=a.lehrende.substring(a.lehrende.indexOf(" ")+1);b.name=a.leistung;b.ects=a.ects;b.fristende=a.fristende;var e=new Date;b.datum=e.getDate()+"."+(e.getMonth()+1)+"."+e.getFullYear();0<c&&(b.modul_id=c,b.modul=c);student.anmeldungen.add(student.matrikelnummer,b,function(a){_renderAnmeldungenTabelle(student.anmeldungen);$("#modKurssuche").modal("hide")})};window.getAbsolvierte=function(a,c,b,e){b=[];for(e=0;e<student.leistungen.leistungen.length;e++)student.leistungen.leistungen[e].id==
c.id&&student.leistungen.leistungen[e].modul==a.id&&b.push(student.leistungen.leistungen[e]);return b}});$(document).ready(function(){$("body").on({ajaxStart:function(){$(this).addClass("loading")},ajaxStop:function(){$(this).removeClass("loading")}});$("#cmdAntragProblem").on("click",function(){$("#modAntragProblem").modal("show")});$("#cmdModAntragProblemClose").on("click",function(){$("#modAntragProblem").modal("hide")});$.signUpGlobal.matrikelnummer=$("#logged-in-user-matrikelnummer").val();$.signUpGlobal.seminar_id=$("#logged-in-user-seminar").val();student={};$.signUpGlobal.info={};$.signUpGlobal.info.seminar=
{};$("#chkDatenKorrekt").on("click",function(){$("#chkDatenKorrekt").prop("checked")?$("#divSprachwahl").fadeIn():($("#divSprachwahl").fadeOut(),$("#chkTranskript_de").prop("checked",!1),$("#chkTranskript_en").prop("checked",!1),$("#cmdApplyForTranscript").addClass("disabled"))});window.initSignUp=function(){$.signUpGlobal.info.seminar.faecher=new shj.signUp.seminar.Faecher($.signUpGlobal.seminar_id,function(){showData(!0)});sFAIL="";new shj.signUp.seminar.Noten($.signUpGlobal.seminar_id,function(a){for(var c=
0;c<a.noten.length;c++)"true"!==a.noten[c].bestanden&&(sFAIL+=";"+a.noten[c].wert+";")})};$("#navLeistungen").on("click",showLeistungen);$("#navAnmeldungen").on("click",showAnmeldungen);$("#navAntrag").on("click",function(){showAntraege();setView($.signUpGlobal.iVIEW_STUDENT_ANTRAG)});$("#cmdNeuesTranskript").on("click",function(){showTranscript("simple");setView($.signUpGlobal.iVIEW_STUDENT_ANTRAG_TRANSKRIPT_1)});$("#cmdNeuesGymPOMissingCredits").on("click",function(){addAntrag($.signUpGlobal.iTYP_ANTRAG_GYMPO_MISSING_CREDITS,
"Antrag auf Ausstellen der Bescheinigung zu fehlenden Leistungen f\u00fcrs Pr\u00fcfungamt zur Anmeldung zum Staatsexamen (GymPO).")});$("#cmdApplyForTranscript").on("click",function(){$("#cmdApplyForTranscript").hasClass("disabled")||($("#chkTranskript_de").prop("checked")&&addAntrag($.signUpGlobal.iTYP_ANTRAG_TRANSKRIPT_DE,"Antrag auf Ausstellen eines (deutschen) Transkripts."),$("#chkTranskript_en").prop("checked")&&addAntrag($.signUpGlobal.iTYP_ANTRAG_TRANSKRIPT_EN,"Antrag auf Ausstellen eines (englischen) Transkripts."),
$("#chkTranskript_unmodular").prop("checked")&&addAntrag($.signUpGlobal.iTYP_ANTRAG_TRANSKRIPT_UNMODULAR,"Antrag auf Ausstellen eines Transkripts."),!$("#chkTranskript_de").prop("checked")&&(!$("#chkTranskript_en").prop("checked")&&!$("#chkTranskript_unmodular").prop("checked"))&&alert("Bitte w\u00e4hlen Sie aus, ob Sie ein deutsches oder englisches Transkript beantragen m\u00f6chten."))});$("#cmdDeletePic").on("click",function(){dropImage()});$("#cmdAnmeldungAdd").on("click",showAnmeldungPicker);
$("#navPruefungen").on("click",function(){showPruefungen();setView($.signUpGlobal.iVIEW_STUDENT_PRUEFUNGEN)});$("#navStudienbilanz").on("click",function(){showTranscript();setView($.signUpGlobal.iVIEW_STUDENT_STUDIENBILANZ)});$("#navTranskriptdruck").on("click",function(){showDokumente();setView($.signUpGlobal.iVIEW_STUDENT_TRANSKRIPTDRUCK)});$("#cmdUpdatePic").on("click",function(){$("#modIMGUpload").modal("show")});$("form").bind("submit",function(a){a.preventDefault()});$(".dropdown-toggle").dropdown();
$("#navDaten").on("click",function(){showData(!1)});$("#cmdConfirmDeleteAnmeldung").on("click",function(){deleteAnmeldung(!0)});$("#cmdCancelDeleteAnmeldung").on("click",function(){deleteAnmeldung(!1)});$("#fKurssuche").submit(function(a){a.preventDefault();showKurssucheErgebnis()});$("#cmdPrintTranskript").on("click",addNewTranscript);$("#cmdPrintTranskript_en").on("click",function(){addNewTranscript(!0)})});
function showDokumente(){if("undefined"===typeof student.dokumente||null===student.dokumente)student.dokumente=new shj.signUp.student.Dokumente(student.matrikelnummer,function(a){_renderDokumenteTbl()})}
function _renderDokumenteTbl(){student.dokumente.transkripte.shj_rendering={item:student.dokumente.transkripte,emptyFirst:!0,HTML_template:"#template_transkriptdruck",HTML_table_container:"#divTranskriptdruck",HTML_template_class_prefix:"dokument_"};shj.signUp.toolbox.render(student.dokumente.transkripte)}
function showDokument(a){$("#formShowDokument").remove();a=$('<form target="_blank" id="formShowDokument" method="post" action="./dokument.jsp"><input type="hidden" name="matrikelnummer" value="'+student.matrikelnummer+'"/><input type="hidden" name="datum" value="'+shj.signUp.toolbox.getGermanDate(a.datum)+'" /><input type="hidden" name="verifikation" value="'+a.verifikationscode+'"/></form>');$("body").append(a);a.submit();$("#formShowDokument").remove()}
function printDokument(a){$("#formShowDokumentPDF").remove();a=$('<form target="_blank" method="post" action="./print/transcript-selfprint_relay.jsp"><input type="hidden" name="matrikelnummer" value="'+student.matrikelnummer+'"/><input type="hidden" name="datum" value="'+shj.signUp.toolbox.getGermanDate(a.datum)+'" /><input type="hidden" name="verifikation" value="'+a.verifikationscode+'"/></form>');$("body").append(a);a.submit();$("#formShowDokumentPDF").remove()}
function deleteDokument(a){shj.signUp.toolbox.confirmDelete("#modShj_SignUp_ConfirmDelete","Transkript l\u00f6schen?","Soll dieses Transkript<br /><br /><b>"+a.dok_name+"</b> (vom "+shj.signUp.toolbox.getGermanDate(a.datum)+")<br /><br />wirklich unwiderruflich gel\u00f6scht werden?<br />(<b>Achtung, es kann dann auch nicht mehr verifiziert werden</b>)",function(){student.dokumente.drop(a,function(){_renderDokumenteTbl()},function(){alert("Fehler -- sorry. Das Transkript konnte nicht gel\u00f6scht werden!")})})}
function addNewTranscript(a){6<=student.dokumente.transkripte.length?alert("Sie k\u00f6nnen nur h\u00f6chstens sechs Transkripte gleichzeitig vorhalten.\n\nL\u00f6schen Sie bitte zun\u00e4chst ein \u00e4lteres Transkript"):(new shj.signUp.student.Dokument(student.matrikelnummer,{english:a&&!0===a?"true":"false"})).add(function(a){student.dokumente.transkripte.unshift(new shj.signUp.student.Dokument(student.matrikelnummer,a.transkript));_renderDokumenteTbl()},function(){alert("Konnte das neue Transkript nicht anzeigen -- Reload?")})}
function existiertOffenerAntrag(a){if("undefined"===typeof student.antraege||null===student.antraege)student.antraege=new shj.signUp.student.Antraege(student.matrikelnummer,function(b){return existiertOffenerAntrag(a)});else{for(var c=0;c<student.antraege.antraege.length;c++)if(parseInt(student.antraege.antraege[c].typ_id)===parseInt(a)&&"true"!=student.antraege.antraege[c].abgeschlossen)return!0;return!1}}
function checkAntragPlausibility(a){if(existiertOffenerAntrag(a))return alert("Sorry -- ein entsprechender Antrag ist bereits gestellt. Bitte warten Sie, bis er bearbeitet ist, bevor Sie ihn erneut stellen."),!1;var c=getLeistungLast();return getAntragLast(a)>=c?(alert("Sorry -- das Transkript wurde Ihnen bereits ausgestellt, bzw. es sind seit dem letzten Ausstellen des Transkripts keine weiteren Leistungen hinzugekommen.\n\nBitte lassen Sie ggf. eine Kopie des vorliegenden Transkripts beglaubigen.\n\nSobald eine neue Leistung hinterlegt ist, k\u00f6nnen Sie auch wieder ein Transkript beantragen."),
!1):!0}function getLeistungLast(){if("undefined"===typeof student.leistungen||null===student.leistungen)student.leistungen=new shj.signUp.student.Leistungen(student.matrikelnummer,getLeistungLast);for(var a=new Date(2001,1,1),c=0;c<student.leistungen.leistungen.length;c++){var b=shj.signUp.toolbox.getDateFromGerman(student.leistungen.leistungen[c].datum);a<b&&(a=b)}return a}
function getAntragLast(a){if("undefined"===typeof student.antraege||null===student.antraege)student.antraege=new shj.signUp.student.Antraege(student.matrikelnummer,function(b){getAntragLast(a)});for(var c=new Date(2001,1,1),b=0;b<student.antraege.antraege.length;b++)if(student.antraege.antraege[b].typ_id==a&&"true"==student.antraege.antraege[b].abgeschlossen){var e=shj.signUp.toolbox.getDateFromGerman(student.antraege.antraege[b].stati[student.antraege.antraege[b].stati.length-1].datum);c<e&&(c=e)}return c}
function addAntrag(a,c){checkAntragPlausibility(a)&&shj.signUp.toolbox.confirmDelete("#modShj_SignUp_ConfirmDelete","Antrag stellen?","Soll der Antrag<br /><br /><b>"+c+"</b><br /><br />wirklich gestellt werden?",function(){(new shj.signUp.student.Antrag(-1,{matrikelnummer:$.signUpGlobal.matrikelnummer,id:"-1",typ_id:a,antrag:c,stati:[]})).add(function(){student.antraege=null;showAntraege();setView($.signUpGlobal.iVIEW_STUDENT_ANTRAG)},function(){alert("Fehler beim Hinzuf\u00fcgen des Antrags")})})}
function _renderAntraegeTabelle(a){var c=$("#template_divAntrag");$("#divAntraege").empty();shj.signUp.toolbox.isUnmodularInHeidelberg(student.fach_id)&&($("#AntragTranskriptStep1 .shjModularOnly").hide(),$("#AntragTranskriptStep1 .shjUnmodularOnly").show());for(var b=0;b<a.antraege.length;b++){var e=c.clone(),e=shj.signUp.toolbox.renderDiv(e,a.antraege[b],"template_Antrag_");e.find("#collapseOne").attr("id","Stati-"+a.antraege[b].id);e.attr("id","Antrag"+a.antraege[b].id).find("a").attr("href","#Stati-"+
a.antraege[b].id);"true"==a.antraege[b].abgeschlossen&&e.find("a").addClass("text-success");for(var d=[],f=0;f<a.antraege[b].stati.length;f++)d.push("<li>"+a.antraege[b].stati[f].datum+": "+a.antraege[b].stati[f].bezeichnung+(0===a.antraege[b].stati[f].bearbeiter_name.indexOf("null")?"":" ("+a.antraege[b].stati[f].bearbeiter_name+")</li>"));e.find(".shj_antrag_stati").append("<ul>"+d.join("")+"</ul>");$("#divAntraege").append(e)}0==b?$("#AntragTranskript_meineAntraege").hide():$("#AntragTranskript_meineAntraege").show()}
function getDozentName(a){for(var c=0;c<$.signUpGlobal.info.seminar.dozenten.dozenten.length;c++)if($.signUpGlobal.info.seminar.dozenten.dozenten[c].id===a)return $.signUpGlobal.info.seminar.dozenten.dozenten[c].name;return""}function showAntraege(){"undefined"===typeof student.antraege||null===student.antraege?student.antraege=new shj.signUp.student.Antraege(student.matrikelnummer,function(a){_renderAntraegeTabelle(a)}):_renderAntraegeTabelle(student.antraege);return!1}
function imgUploadResetView(){$("#cmdResetIMG").click();$("#img_progress_bar").hide();$("#img_progress_bar").find(".bar").attr("style","width:0%");$("#cmdIMGUpload").show();$("#cmdIMGCancel").show();$("#img_wait").hide()}
function progressHandlingFunctionImg(a){a.lengthComputable&&($(".bar").attr("style","width:"+100*a.loaded/a.total+"%"),1<=a.loaded/a.total&&$("#img_progress_bar").fadeOut("slow",function(){$("#cgIMGSuchen").fadeOut();$("#cmdIMGUpload").fadeOut();$("#cmdCancelIMG").fadeOut();$("#img_wait").fadeIn()}))}
function initPhoto(){$.ajax({url:"../../studentPhoto/"+student.pid+".jpg",type:"HEAD",success:function(){$("#studentPhoto").attr("src",function(){return"../../studentPhoto/"+student.pid+".jpg?"+(new Date).getTime()});$("#studentPhoto_thumbnail").attr("src",function(){return"../../studentPhoto/"+student.pid+".jpg?"+(new Date).getTime()});$("#picplace").attr("href",function(){return"../../studentPhoto/"+student.pid+".jpg?"+(new Date).getTime()});$("#studentInfo").show();$("#cmdDeletePic").show()},error:function(){$("#studentInfo").show();
$("#cmdDeletePic").hide();"Herr"==student.anrede&&$("#studentPhoto").attr("src","img/acspike_male_user_icon.png")}})}function showKurssuche(a){showKurssucheFormular(!0);$("#modKurssuche").modal("show");$("#bCommitment").val(a)}function showKurssucheFormular(a){a?($("#Kurssuchformular").show(),$("#modKurssuche .modal-footer").show(),$("#Kurssuchergebnis").hide()):($("#Kurssuchformular").hide(),$("#modKurssuche .modal-footer").hide(),$("#Kurssuchergebnis").show())}
function showKurssucheErgebnis(){showKurssucheFormular(!1);shj.signUp.search.findKurse($("#fKurssuche").serialize(),{item:"kurs",emptyFirst:!0,actOnDom:!0,stripPrefixOffId:!1,HTML_template:"#template_kurs",HTML_table_container:"#Kurssuchergebnis",HTML_template_class_prefix:"kurssuche_"},function(){alert("Sorry -- unter diesen Kriterien wurde kein Kurs gefunden");showKurssucheFormular(!0)});return!1}
function coursePicked(a){var c=-1,b=-1,e=[];$.each(student.fach.module,function(d,f){c=f.modul.id.toString();modulContainsLeistung(c,a.leistung_id.toString())&&(b=f.modul.id,e.push('<tr class="linked-tablerow" class="anmeldungModulID" modul_id="'+c+'"><td>'+f.modul.name+"</td></tr>"))});1<e.length?($("#tKurssuchergebnistabelle").html(""),$("#lblKurssuche_Modulwahl").text("Bitte w\u00e4hlen Sie ein Modul..."),$("#tKurssuchergebnistabelle").append(e.join()),$("#tKurssuchergebnistabelle tr").bind("click",
function(){addAnmeldung(a,$(this).attr("modul_id"))})):1===e.length?addAnmeldung(a,b):addAnmeldung(a,-1)}function showAnmeldungPicker(){showKurssuche(!0)}$("input[type=file]").change(function(a){a=$("input[type=file]").val();4>a.length||(".jpg"!=a.substr(a.length-4).toLowerCase()?(alert("Das Foto muss im JPG-Format hochgeladen werden."),$("#Reset1").click()):$("#cmdFotoUpload").removeClass("disabled"))});
function saveDetails(){student.email=$("#email").val();student.mobil=$("#mobil").val();student.info_email=$("#infoEmail").attr("checked");var a=student;a.fach=null;a.pruefungen=null;a.leistungen=null;a.anmeldungen=null;shj.signUp.student.update(student.matrikelnummer,a,function(){showData(!0)})}
function showData(a){if(!0!=a)return setView($.signUpGlobal.iVIEW_STUDENT_DETAIL),student;shj.signUp.search.findStudierende({},{},function(a){student=a[0].student;student.leistungen=null;student.anmeldungen=null;""==student.email&&(student.email="---");""==student.telefon&&(student.telefon="--");var b=$("#template_subStudentHeadlines").clone();student.fach=$.signUpGlobal.info.seminar.faecher.get(student.fach_id);shj.signUp.toolbox.isUnmodularInHeidelberg(student.fach_id)&&$("#navStudienbilanz").hide();
student.fachname=student.fach.name;shj.signUp.toolbox.renderDiv(b,student,"tpl_studentWell_");b.find("#template_studentDetails_email").val(student.email).attr("id","email");b.find("#template_studentDetails_mobil").val(student.mobil).attr("id","mobil");b.find("#template_studentDetails_infoEmail").attr("id","infoEmail");"true"==student.info_email&&b.find("#infoEmail").attr("checked","true");b.find("#template_studentPicture").attr("id","studentPhoto");b.find("#template_picplace").attr("id","picplace");
b.find("#tpl_cmdDeletePic").attr("id","cmdDeletePic");b.find(".template_studentDetails_change").on("change",function(){b.find(".btn").removeClass("disabled")});$("#divDaten").empty();$("#divDaten").append(b);$("#divDaten form").on("submit",function(a){a.preventDefault();saveDetails()});$.ajax({url:"../../studentPhoto/"+student.pid+".jpg",type:"HEAD",success:function(){$("#studentPhoto").attr("src",function(){return"../../studentPhoto/"+student.pid+".jpg"});$("#picplace").attr("href",function(){return"../../studentPhoto/"+
student.pid+".jpg"});$("#studentInfo").show()},error:function(){$("#studentInfo").show();"Herr"==student.anrede&&$("#studentPhoto").attr("src","img/acspike_male_user_icon.png")}});initPhoto();setView($.signUpGlobal.iVIEW_STUDENT_DETAIL)});return!0}
function dropImage(){shj.signUp.toolbox.confirmDelete("#modShj_SignUp_ConfirmDelete","Bild l\u00f6schen?","Soll Ihr Bild <br />wirklich unwiderruflich gel\u00f6scht werden?",function(){var a={};a.matrikelnummer=student.matrikelnummer;a.command="Delete Student Image";$.ajax({url:"util/deleteFile.jsp",type:"POST",success:function(a){$("#studentPhoto").attr("src","img/openclipart_dagobert83_user_icon.png");$("#cmdDeletePic").fadeOut();$("#studentPhoto_thumbnail").attr("src","http://www.placehold.it/200x150/EFEFEF/AAAAAA&text=gel\u00f6scht")},
error:function(a,b,e){alert("Fehler beim L\u00f6schen des Fotos"+a+","+b+","+e)},data:a,cache:!1,timeout:2E4,contentType:"application/x-www-form-urlencoded;charset=utf8",dataType:"json"})},function(){})}
$("#cmdIMGUpload").click(function(){var a=new FormData;a.append("file",$("#fileImg")[0].files[0]);if(0>=$("#fileImg")[0].files[0].size)return!1;if(500999<a.size)return alert("Die Datei ist zu gro\u00df, sorry. Das Limit ist 500 kB"),!1;$.ajax({url:"./util/fotoUpload.jsp",type:"POST",xhr:function(){myXhr=$.ajaxSettings.xhr();myXhr.upload&&myXhr.upload.addEventListener("progress",progressHandlingFunctionImg,!1);return myXhr},beforeSend:function(){$("#img_progress_bar").show();$("#cmdIMGUpload").fadeOut();
$("#cmdIMGCancel").fadeOut()},success:function(a){$("#img_progress_bar").hide();$("#modIMGUpload").modal("hide");initPhoto()},error:function(a,b,e){alert("Fehler beim Ajax Foto-Upload: "+explainMe(a)+"\n"+b+"\n"+e)},data:a,cache:!1,contentType:!1,processData:!1})});
window.setView=function(a){$("#lblKurssuche_Modulwahl").text("Kurssuche");$(".signUp-student-nav").removeClass("active");$(".signUp_viewToggle").hide();switch(a){case $.signUpGlobal.iVIEW_STUDENT_DETAIL:$("#navDaten").parent().addClass("active");$("#divDaten").fadeIn();$("#help_url").attr("href","hilfe/studierende/help_data.jsp");leistung=null;break;case $.signUpGlobal.iVIEW_STUDENT_LEISTUNGEN:$("#navLeistungen").parent().addClass("active");$("#help_url").attr("href","hilfe/studierende/leistungen.jsp");
$("#divLeistungen").fadeIn();break;case $.signUpGlobal.iVIEW_STUDENT_ANMELDUNGEN:$("#navAnmeldungen").parent().addClass("active");$("#help_url").attr("href","hilfe/studierende/anmeldungen.jsp");$("#divAnmeldungen").fadeIn();break;case $.signUpGlobal.iVIEW_STUDENT_PRUEFUNGEN:$("#navPruefungen").parent().addClass("active");$("#help_url").attr("href","hilfe/studierende/pruefungen.jsp");$("#divPruefungen").fadeIn();break;case $.signUpGlobal.iVIEW_STUDENT_STUDIENBILANZ:$("#navStudienbilanz").parent().addClass("active");
$("#help_url").attr("href","hilfe/studierende/studienbilanz.jsp");$("#transkript").fadeIn();break;case $.signUpGlobal.iVIEW_STUDENT_ANTRAG:$("#navAntrag").parent().addClass("active");$("#help_url").attr("href","hilfe/studierende/antrag.jsp");$("#AntragTranskript").fadeIn();break;case $.signUpGlobal.iVIEW_STUDENT_ANTRAG_TRANSKRIPT_1:$("#navAntrag").parent().addClass("active");$("#help_url").attr("href","hilfe/studierende/antrag.jsp");$("#AntragTranskriptStep1").fadeIn();break;case $.signUpGlobal.iVIEW_STUDENT_TRANSKRIPTDRUCK:shj.signUp.toolbox.isUnmodularInHeidelberg($("#logged-in-user-fach_id").val())?
alert("Sorry -- f\u00fcr unmodulare Studieng\u00e4nge (Magister, Staatsexamen nach WPO) stehen momentan keine Transkripte zum Selbstdruck zur Verf\u00fcgung."):($("#navTranskriptdruck").parent().addClass("active"),$("#help_url").attr("href","hilfe/studierende/transkriptdruck.jsp"),$("#Transkriptdruck").fadeIn())}};
function showTranscript(a){if("undefined"===typeof student.leistungen||null===student.leistungen)student.leistungen=new shj.signUp.student.Leistungen(student.matrikelnummer,function(){showTranscript(a)});else{student.transkript=[];student.transkript.modul=[];for(var c=[],b=0;b<student.fach.module.length;b++){student.transkript.modul.push({name:student.fach.module[b].modul.name,name_en:student.fach.module[b].modul.name_en,id:student.fach.module[b].modul.id,min_ects:student.fach.module[b].modul.min_ects,
leistungen:[]});for(var e=0;e<student.fach.module[b].modul.leistungen.length;e++){for(var c=getAbsolvierte(student.fach.module[b].modul,student.fach.module[b].modul.leistungen[e].leistung),d=0;d<c.length;d++)student.transkript.modul[b].leistungen.push(c[d]);0===c.length&&student.transkript.modul[b].leistungen.push(student.fach.module[b].modul.leistungen[e].leistung)}}"undefined"===typeof a?renderTranscript():renderTranscriptSimple()}}
function renderTranscript(){var a=[],c=0,b=0;$("#tStudienbilanz tbody").find("tr").remove();$("#transkript *").not("h2").remove();for(var e=0;e<student.transkript.modul.length;e++){for(var d=$("#tStudienbilanz").clone(),c=0,b=student.transkript.modul[e].min_ects,f=0;f<student.transkript.modul[e].leistungen.length;f++){if("undefined"!=typeof student.transkript.modul[e].leistungen[f].note){var k=$("#template_transkript_absolvierte").clone(),c=c+parseFloat(student.transkript.modul[e].leistungen[f].ects);
shj.signUp.toolbox.mergeToRow(k,student.transkript.modul[e].leistungen[f],"template_transkript_absolvierte_")}else k=$("#template_transkript_offene").clone(),shj.signUp.toolbox.mergeToRow(k,student.transkript.modul[e].leistungen[f],"template_transkript_offene_");a.push(k)}d.attr("id","mod_"+student.transkript.modul[e].id);d.find(".template_ModulSummary_modulname").text(student.transkript.modul[e].name);0==parseFloat(b)||parseFloat(b)>parseFloat(c)?(sClass="badge badge-warning",sSummary=0==parseFloat(b)?
"Es werden 0 LP verlangt. SignUp kann nicht beurteilen, zu wie viel % das Modul absolviert ist":Math.round(100*(parseFloat(c)/parseInt(b)))+"% abgeschl. ("+(b-c)+" LP fehlen noch)."):parseFloat(b)<parseFloat(c)?(sClass="badge badge-important",sSummary=-1*(b-c)+" LP zu viel."):(sSummary="OK",sClass="badge badge-success");d.find(".template_ModulSummary_computedInfo").text(sSummary).parents("table").find("th").addClass(sClass);d.append(a);$("#transkript").append(d);$("#transkript").append("<hr>");a=
[]}setView($.signUpGlobal.iVIEW_STUDENT_STUDIENBILANZ)}
function renderTranscriptSimple(){var a=0,c=0,b=0,a=$("#templatekontrollvorlage_sd").clone();a.attr("id","kontrollvorlage_sd");a=shj.signUp.toolbox.renderDiv(a,student,"template_kontrollvorlage_student_");$("#AntragTranskript_header").empty().append(a);for(var e=!0,d=[],f=0;f<student.transkript.modul.length;f++){for(var a=0,b=student.transkript.modul[f].min_ects,e=!0,k=0;k<student.transkript.modul[f].leistungen.length;k++)if("undefined"!==typeof student.transkript.modul[f].leistungen[k].note&&isNoteBestanden(student.transkript.modul[f].leistungen[k].note)){e&&
(d.push("<b>"+student.transkript.modul[f].name+"</b>"),e=!1);var h=$("#template_kontrollvorlage_leistung").clone();h.removeAttr("id");a+=parseFloat(student.transkript.modul[f].leistungen[k].ects);d.push($(shj.signUp.toolbox.renderDiv(h,student.transkript.modul[f].leistungen[k],"template_kontrollvorlage_leistung_")).html())}parseFloat(b)===parseFloat(a)?e||d.push("<div><em>Modul komplett absolviert</em></div><br />"):e||d.push("<br />");c+=a}d.push("<br /><b>Insgesamt "+c+" Leistungspunkte erreicht<br />");
$("#AntragTranskript_header").append(d.join("<br>"))}function isNoteBestanden(a){return!(0<=sFAIL.indexOf(";"+a+";"))};!function(a){var c=function(b,c){this.$element=a(b);this.type=this.$element.data("uploadtype")||(0<this.$element.find(".thumbnail").length?"image":"file");this.$input=this.$element.find(":file");if(0!==this.$input.length){this.name=this.$input.attr("name")||c.name;this.$hidden=this.$element.find('input[type=hidden][name="'+this.name+'"]');0===this.$hidden.length&&(this.$hidden=a('<input type="hidden" />'),this.$element.prepend(this.$hidden));this.$preview=this.$element.find(".fileupload-preview");
var d=this.$preview.css("height");"inline"!=this.$preview.css("display")&&"0px"!=d&&"none"!=d&&this.$preview.css("line-height",d);this.original={exists:this.$element.hasClass("fileupload-exists"),preview:this.$preview.html(),hiddenVal:this.$hidden.val()};this.$remove=this.$element.find('[data-dismiss="fileupload"]');this.$element.find('[data-trigger="fileupload"]').on("click.fileupload",a.proxy(this.trigger,this));this.listen()}};c.prototype={listen:function(){this.$input.on("change.fileupload",a.proxy(this.change,
this));a(this.$input[0].form).on("reset.fileupload",a.proxy(this.reset,this));this.$remove&&this.$remove.on("click.fileupload",a.proxy(this.clear,this))},change:function(a,c){if("clear"!==c){var d=void 0!==a.target.files?a.target.files[0]:a.target.value?{name:a.target.value.replace(/^.+\\/,"")}:null;if(d)if(this.$hidden.val(""),this.$hidden.attr("name",""),this.$input.attr("name",this.name),"image"===this.type&&0<this.$preview.length&&("undefined"!=typeof d.type?d.type.match("image.*"):d.name.match(/\.(gif|png|jpe?g)$/i))&&
"undefined"!=typeof FileReader){var f=new FileReader,k=this.$preview,h=this.$element;f.onload=function(a){k.html('<img src="'+a.target.result+'" '+("none"!=k.css("max-height")?'style="max-height: '+k.css("max-height")+';"':"")+" />");h.addClass("fileupload-exists").removeClass("fileupload-new")};f.readAsDataURL(d)}else this.$preview.text(d.name),this.$element.addClass("fileupload-exists").removeClass("fileupload-new");else this.clear()}},clear:function(a){this.$hidden.val("");this.$hidden.attr("name",
this.name);this.$input.attr("name","");if(navigator.userAgent.match(/msie/i)){var c=this.$input.clone(!0);this.$input.after(c);this.$input.remove();this.$input=c}else this.$input.val("");this.$preview.html("");this.$element.addClass("fileupload-new").removeClass("fileupload-exists");a&&(this.$input.trigger("change",["clear"]),a.preventDefault())},reset:function(a){this.clear();this.$hidden.val(this.original.hiddenVal);this.$preview.html(this.original.preview);this.original.exists?this.$element.addClass("fileupload-exists").removeClass("fileupload-new"):
this.$element.addClass("fileupload-new").removeClass("fileupload-exists")},trigger:function(a){this.$input.trigger("click");a.preventDefault()}};a.fn.fileupload=function(b){return this.each(function(){var e=a(this),d=e.data("fileupload");d||e.data("fileupload",d=new c(this,b));"string"==typeof b&&d[b]()})};a.fn.fileupload.Constructor=c;a(document).on("click.fileupload.data-api",'[data-provides="fileupload"]',function(b){var c=a(this);c.data("fileupload")||(c.fileupload(c.data()),c=a(b.target).closest('[data-dismiss="fileupload"],[data-trigger="fileupload"]'),
0<c.length&&(c.trigger("click.fileupload"),b.preventDefault()))})}(window.jQuery);(function(a){a.fn.tableSort=function(c){var b=a.extend({animation:"slide",rowspan:!1,sortAs:{},speed:300,distance:"300px",delay:1},c);return this.each(function(){function c(b){for(var d="",e=0;e<=b.length;e++)if(a.isNumeric(b.charAt(e))||"."==b.charAt(e))d+=b.charAt(e);return d}var d=[],f=[],k=!1,h=[],g=[],l=[],q=[],n,m=a(this),k=!1;!0==b.rowspan&&a(m).find("td").each(function(){if(void 0!=a(this).attr("rowspan")){var b=a(this).attr("rowspan");a(this).removeAttr("rowspan");for(var c=a(this).parent().index(),
d=1;1<b;){switch(a(this).index()){case 0:a(this).clone().prependTo(a(this).parent().parent().children().eq(c+d));break;default:a(this).clone().insertAfter(a(this).parent().parent().children().eq(c+d).children().eq(a(this).index()-1))}d++;b--}}});0>=b.delay&&(b.delay=1);a(m).find("tr:first-child th").each(function(c){if(void 0!=b.sortBy)switch(b.sortBy[c]){case "text":case "numeric":case "nosort":q[c]=b.sortBy[c];return}if(void 0!=a(this).attr("data-sort"))switch(a(this).attr("data-sort")){case "text":case "numeric":case "nosort":q[c]=
a(this).attr("data-sort");return}for(var d=a(m).find("tr:eq(1) td:eq("+c+")").text(),e=0,f=0,g=0;g<=d.length-1;g++)a.isNumeric(d.charAt(g))||","==d.charAt(g)||"."==d.charAt(g)?e++:f++;q[c]=e>f?"numeric":"text"});a(m).css("position","relative");a(m).find("tr:first-child th").each(function(b){"nosort"!=q[b]&&a('<div class="sortArrow"><div class="sortArrowAscending"></div><div class="sortArrowDescending"></div></div>').appendTo(a(this))});a(m).find("tr:first-child th").each(function(){l.push(a(this).outerWidth(!0))});
a(m).find("tr td, tr th").each(function(){a(this).css({minWidth:l[a(this).index()]})});a(m).find("tr").each(function(){a(this).width(a(this).outerWidth(!0));a(this).height(a(this).outerHeight(!0))});a(m).height(a(this).outerHeight()).width(a(this).outerWidth());var p=0;a(m).find("tr").each(function(){a(this).css("top",p);p+=a(this).outerHeight()});a(m).find("tr").each(function(){a(this).css("position","absolute")});a(m).find("tr th").each(function(b){"nosort"!=q[b]&&a(this).css("cursor","pointer")});
a(m).find("tr th").click(function(){if(!k&&"nosort"!=q[a(this).index()]){n=a(this).index();0==d.length&&a(m).find("tr").each(function(f){0<f&&a(this).addClass("tsort_id-"+(f-1));a(this).find("td").each(function(g){a(this).is(":first-child")&&(d.push({}),d[d.length-1].id=f-1,d[d.length-1].td=[],d[d.length-1].height=a(this).parent().height());void 0!=a(this).attr("data-sortAs")?d[d.length-1].td.push(a(this).attr("data-sortAs")):void 0!=typeof b.sortAs&&void 0!=b.sortAs[a(this).text()]?d[d.length-1].td.push(b.sortAs[a(this).text()]):
"numeric"==q[g]?d[d.length-1].td.push(c(a(this).text())):d[d.length-1].td.push(a(this).text())})});h[n]||(h[n]=d.concat(),"numeric"==q[n]?h[n].sort(function(a,b){return a.td[n]-b.td[n]}):"text"==q[n]&&h[n].sort(function(a,b){return a.td[n].localeCompare(b.td[n])}));if(0==g.length)g.push({column_id:n,direction:"ascending"});else if(0!=g.length)if(n==g[g.length-1].column_id)switch(g[g.length-1].direction){case "ascending":g.push({column_id:n,direction:"descending"});break;case "descending":g.push({column_id:n,
direction:"ascending"})}else g.push({column_id:n,direction:"ascending"});var l=h[n],l="ascending"==g[g.length-1].direction?l.concat():l.concat().reverse();p=a(m).find("tr").height();if("none"==b.animation)for(index=0;index<l.length;index++){var r=l[index];a(m).find("tr.tsort_id-"+r.id).css({top:p}).appendTo(m);p+=r.height}else if("slide"==b.animation)for(index=0;index<l.length;index++)r=l[index],a(m).find("tr.tsort_id-"+r.id).stop().delay(b.delay*index).animate({top:p},b.speed,"swing").appendTo(m),
p+=r.height;else if("fadeAll"==b.animation)k=!0,a(m).find("tr:gt(0)").fadeOut(b.speed).promise().done(function(){for(index=0;index<l.length;index++){var c=l[index];a(m).find("tr.tsort_id-"+c.id).css({top:p}).appendTo(m);p+=c.height;index==d.length-1&&a(m).find("tr").delay(1).fadeIn(b.speed,"swing").promise().done(function(){k=!1})}});else if("fade"==b.animation){k=!0;if(0==f.length)for(index=0;index<l.length;index++)r=l[index],f[r.id]=a(m).find("tr.tsort_id-"+r.id).clone();a(m).find("tr:gt(0)").each(function(c){a(this).delay(c*
b.delay).fadeOut(b.speed,"swing",function(){a(this).remove();a(f[l[c].id]).clone().hide().css({top:p}).appendTo(m).delay(1).fadeIn(b.speed,"swing",function(){c==d.length-1&&(k=!1)});p+=l[c].height})})}else if("slideLeftAll"==b.animation)k=!0,a(m).find("tr:gt(0)").each(function(c){a(this).delay(c*b.delay).animate({left:"-"+b.distance,opacity:0},b.speed,"swing");c==d.length-1&&a(this).promise().done(function(){for(c=0;c<l.length;c++){var d=l[c];a(m).find("tr.tsort_id-"+d.id).css({top:p,left:"",right:"-"+
b.distance}).appendTo(m).delay(c*b.delay).animate({right:"0px",opacity:1},b.speed,"swing",function(){a(this).css("right","auto");a(this).is("tr:last-child")&&(k=!1)});p+=d.height}})});else if("slideLeft"==b.animation){k=!0;if(0==f.length)for(index=0;index<l.length;index++)r=l[index],f[r.id]=a(m).find("tr.tsort_id-"+r.id).clone();a(m).find("tr:gt(0)").each(function(c){a(this).delay(c*b.delay).animate({left:"-"+b.distance,opacity:0},b.speed,"swing",function(){a(this).remove();a(f[l[c].id]).clone().css({opacity:0}).appendTo(m).css({top:p,
left:"",right:"-"+b.distance}).animate({right:"0px",opacity:1},b.speed,function(){a(this).css("right","auto");c==d.length-1&&(k=!1)});p+=l[c].height})})}r=g[g.length-1].direction;a(m).find("tr:first-child th div.sortArrow div").stop(!0,!0).fadeOut(b.speed,"swing");switch(r){case "ascending":a(m).find("tr:first-child th div.sortArrow div.sortArrowAscending").eq(n).fadeIn(b.speed,"swing");break;case "descending":a(m).find("tr:first-child th div.sortArrow div.sortArrowDescending").eq(n).fadeIn(b.speed,
"swing")}}})})}})(jQuery);
